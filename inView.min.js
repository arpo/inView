/*
 Mattias Johansson
 License http://opensource.org/licenses/MIT
*/
var MOS=window.MOS||{};
MOS.inView=function(){function k(c,b,a){var d;$(window).on(c,function(){d&&window.clearTimeout(d);d=window.setTimeout(b,a)})}function l(c,b){b=b||1;var a=c[0].getBoundingClientRect(),d=c.outerHeight(),g=c.outerWidth();return a.top>=-1*d*b&&a.bottom<=window.innerHeight+d*b&&a.left>=-1*g*b&&a.right<=window.innerWidth+g*b?!0:!1}function e(){var c=h.length,b,a,d=[],g=[],e=[],f;f=function(b){a=$(this);l(a,1)?(d.push(a),a.addClass("isVisible")):(e.push(a),a.removeClass("isVisible"));l(a,MOS.inView.outOfBoundsSize)&&
(a.hasClass("isVisible")||g.push(a))};for(b=0;b<c;b+=1)h[b].each(f);return{isVisible:d,notVisible:e,isClose:g}}function f(c){var b=c.isVisible.length,a,d="";for(a=0;a<b;a+=1)d+=c.isVisible[a].attr("id")+", ";$.event.trigger({type:"MOS.inViewCheck",states:c});MOS.inView.doTrace&&MOS.inView.doTrace&&(b=d+" ",window.traceOut||(window.traceOut={container:$('<div id="traceOut" style="border: 1px solid #eee;text-align: left; z-index: 9999; position: fixed; right:10px; top: 10px; width: 280px; padding:10px; background-color: #fff;font-family:sans-serif;font-size:12px; color:#000;"></div>'),
outs:{}},$(document.body).append(window.traceOut.container)),a="Visible",b&&(a="Visible: "+b),window.traceOut.outs.Visible?window.traceOut.outs.Visible.html(a):(window.traceOut.container.append($('<div class="Visible">'+a+"</div>")),window.traceOut.outs.Visible=$("#traceOut .Visible")));return c}function m(){k("scroll",function(c){f(e())},300);k("resize",function(c){f(e())},300);m=function(){}}var n=console?console:{log:function(){}};n.l=n.log;var h=[];return{add:function(c){m();h.push(c)},outOfBoundsSize:2,
whatsVisible:e,check:function(){return f(e())},doTrace:!1,clear:function(){h.length=0}}}();
